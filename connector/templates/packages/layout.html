<!DOCTYPE html>
<html lang="en">
<head>

    {% if title %}
        <title>TravelSmart - {{ title }}</title>
    {% else %}
        <title>TravelSmart</title>
    {% endif %}

    


    <link rel="stylesheet" href="{{ url_for('static', filename='details-stylesheet.css')}}">
     <!-- logo -->
    <link rel="shortcut icon" type="image/png" href="{{ url_for('static', filename='images/logo1.jpg') }}">

    <!--icons -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">

    <!--fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue&family=Girassol&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital@1&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&family=Roboto:wght@500&display=swap" rel="stylesheet">

    <style>
        
        #image1{
           
            background:linear-gradient(rgba(0,0,0,0.25),rgba(0,0,0,0.25)),  url("{{ url_for('static',filename='package-images/' + details_page.image_file1 ) }}");
            width:100%;
            height:100%;
            background-size: cover;
            background-position: center;
        }

        #image2{
            background-image:linear-gradient(rgba(0,0,0,0.25),rgba(0,0,0,0.25)),  url("{{ url_for('static',filename='package-images/' + details_page.image_file2 ) }}");
            height:100%;
            width:100%;
            background-position: center;
        }

        #image3{
            background-image:linear-gradient(rgba(0,0,0,0.25),rgba(0,0,0,0.25)), url("{{ url_for('static',filename='package-images/' + details_page.image_file3 ) }}");
            height:100%;
            width:100%;
            background-position: center;
        }

        #image4{
            background:linear-gradient(rgba(0,0,0,0.25),rgba(0,0,0,0.25)),  url("{{ url_for('static',filename='package-images/' + details_page.image_file4 ) }}");
            width:100%;
            height:100%;
            background-size: cover;
            background-position: center;
        }

        .ratestar{
          color:lightgrey;
          font-size: 2.0rem;
          /* space out the stars */
        }
        .ratestar::before{
          content: '\2605';    /* star outline */
          cursor: pointer;
        }
        .ratestar.rated::before{
          /* the style for a selected star */
          content: '\2605';  /* filled star */
        }
        
        .stars{
            counter-reset: rateme 0;   
            font-weight: 900;
            padding:0;
            margin:-1.5%;
            margin-left:0%;
            margin-bottom:5px;
        }
        .ratestar.rated{
            color:rgba(250, 217, 0, 1);
            counter-increment: rateme 1;
        }
    </style>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    
</head>
<body>

    <div class=navbar>
        <ul class="navbar-l">
            <a href="{{ url_for('home') }}" id="home"><li class="nav">Home</li></a>
            <a href="#"><li class="nav">Hotel</li></a>
            <a href="#"><li class="nav">Flight</li></a>
            <a href="#"><li class="nav">Holidays</li></a>
            <a href="#"><li class="nav">Help</li></a>
        </ul>
        <div class="search">
            <form action="">
                <input type="search" name="search" placeholder="Search...">
            </form>
            <div class="sbutton">
                <button type="submit"><i class="fa fa-search"></i></button>
            </div>
        </div>
       
        <ul class="navbar-l">
            <a href="{{ url_for('account') }}"><li class="nav">Account</li></a>
            <a href="{{ url_for('logout') }}"><li class="nav">Logout</li></a>
        </ul>
    </div>



<div class="main">
    <div class="photo-container">

        <div class="photos fades" id="image1">
            <div class="caption"></div>
        </div>

        <div class="photos fades" id="image2">
            <div class="caption"></div>
        </div>

        <div class="photos fades" id="image3">
            <div class="caption"></div>
        </div>

        <div class="photos fades" id="image4">
            <div class="caption"></div>
        </div>



        <a href="#" class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a href="#" class="next" onclick="plusSlides(1)">&#10095;</a>
    </div>

    <div style="text-align:center">
        <span class="dot" onclick="currentSlide(1)"></span>
        <span class="dot" onclick="currentSlide(2)"></span>
        <span class="dot" onclick="currentSlide(3)"></span>
        <span class="dot" onclick="currentSlide(4)"></span>
    </div>

    <script>
        var slideIndex = 1;
        showSlides(slideIndex);

        function plusSlides(n) {
          showSlides(slideIndex += n);
        }

        function currentSlide(n) {
          showSlides(slideIndex = n);
        }

        function showSlides(n) {
          var i;
          var slides = document.getElementsByClassName("photos");
          var dots = document.getElementsByClassName("dot");
          if (n > slides.length) {slideIndex = 1}    
          if (n < 1) {slideIndex = slides.length}
          for (i = 0; i < slides.length; i++) {
              slides[i].style.display = "none";  
          }
          for (i = 0; i < dots.length; i++) {
              dots[i].className = dots[i].className.replace(" active", "");
          }
          slides[slideIndex-1].style.display = "block";  
          dots[slideIndex-1].className += " active";
        }
    </script>

    <div class="information">
        <div class="imp-points">
            <div class="point1">
                <h1 class="heading1">Highlights</h1>
                    <p class="details"><ul class=" highlights"><b>
                                <li><i class="fa fa-check" aria-hidden="true"></i>{{ details_page.highlight1 }}</li>
                                <li><i class="fa fa-check" aria-hidden="true"></i>{{ details_page.highlight2 }}</li>
                                <li><i class="fa fa-check" aria-hidden="true"></i>{{ details_page.highlight3 }}</li>
                                {% if details_page.highlight4 %}
                                <li><i class="fa fa-check" aria-hidden="true"></i>{{ details_page.highlight4 }}</li>
                                {% endif %}
                            </b>
                        </ul>
                    </p>
            </div>
            <div class="point2">
                <h1 class="heading1">Facilities</h1>
                <div class="facilities">
                    {% if details_page.facility1 %}
                    <div class="facility">
                        <img src="{{ url_for('static', filename='icons/breakfast.png') }}" alt="" class="icons">
                        <p class="icondesc">Breakfast</p>
                    </div>
                    {% endif %}

                    {% if details_page.facility2 %}
                    <div class="facility">
                        <img src="{{ url_for('static', filename='icons/dinner1.png') }}" alt="" class="icons">
                        <p class="icondesc">Dinner</p>
                    </div>
                    {% endif %}

                    {% if details_page.facility3 %}
                    <div class="facility">
                        <img src="{{ url_for('static', filename='icons/hotel.png') }}" alt="" class="icons">
                        <p class="icondesc">Hotel</p>
                    </div>
                    {% endif %}

                    {% if details_page.facility4 %}
                    <div class="facility">
                        <img src="{{ url_for('static', filename='icons/taxi.png') }}" alt="" class="icons">
                        <p class="icondesc">Travel</p>
                    </div>
                    {% endif %}

                    {% if details_page.facility5 %}
                    <div class="facility">
                        <img src="{{ url_for('static', filename='icons/sightseeing.png') }}" alt="" class="icons">
                        <p class="icondesc">Sightseeing</p>
                    </div>
                    {% endif %}

                    {% if details_page.facility6 %}
                    <div class="facility">
                        <img src="{{ url_for('static', filename='icons/guide.png') }}" alt="" class="icons">
                        <p class="icondesc">Guide</p>
                    </div>
                    {% endif %}
                </div>
            </div>  
        </div>
  
        <h1 class="heading">Hotel details</h1>
        
        <div class="hotel">
        {% if details_page.hotel_location1 %}
            <div class="hotels-info">
                <div class="hotel-data" id="location">{{ details_page.hotel_location1}}</div>
                <div class="hotel-data" id="hotel-name">{{ details_page.hotel_name1 }}</div>
                <div class="hotel-data" id="ratings">
                <x-star-rating> 
                    {% for stars in range(details_page.hotel_rating_1) %}
                        <div class="star full"></div>
                    {% endfor %}
                    {% for stars in range(5 - details_page.hotel_rating_1)  %}
                    <div class="star"></div>
                    {% endfor %}
                    </x-star-rating>
                </div>
                    <div class="hotel-data" id="nights">{{ details_page.hotel_stay1 }}</div>
            </div>
        {% endif %}
                
        

        {% if details_page.hotel_location2 %}
            <hr>
            
                <div class="hotels-info">
                    <div class="hotel-data" id="location">{{ details_page.hotel_location2}}</div>
                    <div class="hotel-data" id="hotel-name">{{ details_page.hotel_name2 }}</div>
                    <div class="hotel-data" id="ratings">
                    <x-star-rating> 
                        {% for stars in range(details_page.hotel_rating_2) %}
                            <div class="star full"></div>
                        {% endfor %}
                        {% for stars in range(5 - details_page.hotel_rating_2)  %}
                        <div class="star"></div>
                        {% endfor %}
                        </x-star-rating>
                    </div>
                        <div class="hotel-data" id="nights">{{ details_page.hotel_stay2 }}</div>
                </div>
                    
            
        {% endif %}

        {% if details_page.hotel_location3 %}
            <hr>
            
                <div class="hotels-info">
                    <div class="hotel-data" id="location">{{ details_page.hotel_location3}}</div>
                    <div class="hotel-data" id="hotel-name">{{ details_page.hotel_name3 }}</div>
                    <div class="hotel-data" id="ratings">
                    <x-star-rating> 
                        {% for stars in range(details_page.hotel_rating_3) %}
                            <div class="star full"></div>
                        {% endfor %}
                        {% for stars in range(5 - details_page.hotel_rating_3)  %}
                        <div class="star"></div>
                        {% endfor %}
                        </x-star-rating>
                    </div>
                        <div class="hotel-data" id="nights">{{ details_page.hotel_stay3 }}</div>
                    </div>
                    
                
        {% endif %}
        </div>  
        <br>
        
    

        <h1 class="heading">Overview</h1>
            <p class=details>{{ details_page.overview }}</p>

        <h1 class="heading">Itinerary</h1>


        {% for itinerary in itinerary_details %}
        <div class="day-info">
            <div>
                <h1 class="day-no">DAY {{ itinerary.day_number }} </h1>
            </div>
            <div class="daydetails">
                <p class="details">{{ itinerary.day_details }} </p>
            </div>
        </div>
        {% endfor %}
        </div>
    <hr>
    <a href="{{ url_for('traveller_details', package_id=package_id) }}">
        <div class="enquire">
            BOOK NOW
        </div>
    </a>

</div>

<div class="comments">
    {% if reviews %}
    <h1 class="heading2">Top Reviews of tour</h1>
    <div class="positioncomment">
        {% with messages=get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category,message in messages %}
                    <div class='alert alert-{{ category }}'>
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% for review in reviews %}

        <div class="comment">
        <div class="user-info">
            <div class="userphoto">
                <img class="userimage" src="{{url_for('static', filename='profile_pics/' + review.reviewer.image_file)}}" alt="user-image">
            </div>
            <p class="user-name">{{review.reviewer.username}}</p>
            <div class="ratings">

                <x-star-rating> 
                    {% for i in range(review.rating) %}
                    <div class="star full"></div>
                    {% endfor %}
                    {% for i in range(5-review.rating) %}
                    <div class="star"></div>
                    {% endfor %}
                </x-star-rating>
            </div>

        </div>
        <p class="text">{{ review.review }}</p>
    </div>

        {% endfor %}
    </div>
    <hr>
    {% endif %}
    <h1 class="heading2">Add Review</h1>
    <div class="addcomment">

            <form method="POST" action='' name="review-form">
                {{ form.hidden_tag() }}  
                <div class="form-group rating-section">   
                    <label for="rate" class=rate-label>Rating</label>
                    <div class="stars" data-rating="3">
                        <span class="ratestar"></span>
                        <span class="ratestar"></span>
                        <span class="ratestar"></span>
                        <span class="ratestar"></span>
                        <span class="ratestar"></span>
                    </div>
                </div>
                <div >
                    <input class="rate" type="hidden" name="rating" value="3">
                </div>
    
                <div class="form-group">   
                    {% if form.review.errors %}
                        {{ form.review(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.review.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.review(class="form-control form-control-lg") }}
                    {% endif %}
                </div> 

                <div class="form-group">
                    {{ form.submit(class="btn btn-outline-info") }} 
                </div>
        </form> 
    </div>
    
</div>


 <script>
        
        //initial setup
        document.addEventListener('DOMContentLoaded', function(){
            let stars = document.querySelectorAll('.ratestar');
            stars.forEach(function(star){
                star.addEventListener('click', setRating); 
            });
            
            let rating = parseInt(document.querySelector('.stars').getAttribute('data-rating'));
            let target = stars[rating - 1];
            target.dispatchEvent(new MouseEvent('click'));
        });

        function setRating(ev){
            let span = ev.currentTarget;
            let stars = document.querySelectorAll('.ratestar');
            let match = false;
            let num = 0;
            stars.forEach(function(star, index){
                if(match){
                    star.classList.remove('rated');
                }else{
                    star.classList.add('rated');
                }
                //are we currently looking at the span that was clicked
                if(star === span){
                    match = true;
                    num = index + 1;
                }
            });
            document.querySelector('.stars').setAttribute('data-rating', num);
            document.querySelector('.rate').setAttribute('value', num);
        }
        
        
    </script>
 <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</body>
</html>